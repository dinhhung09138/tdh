@using TDH.Areas.Website.Utils;
@model TDH.Model.Website.ConfigurationModel
@{
    ViewBag.Title = Message.Setting.EDIT_CONFIGURATION;
    Layout = "~/Areas/Administrator/Views/Shared/_AdminLayout.cshtml";
}
@section header{

}
@Html.Action("modulenavigation", "base", new { @area = "administrator", @moduleCode = "website" })
<div class="card card-success">
    <div class="card-header with-border no-bg">
        <h3 class="card-title">Cập nhật thông tin thiết lập</h3>
        <div class="card-tools pull-right">
            @{
                if (ViewBag.View == true)
                {
                    <a class="btn btn-box-tool" href="/website/wsetting/configuration" title="@Message.Setting.CONFIGURATION">
                        <i class="fa fa-long-arrow-left"></i>
                    </a>
                }
                <a class="btn btn-box-tool" href="/website/wsetting/editconfiguration/@ViewBag.id" title="@Message.Setting.EDIT_CONFIGURATION">
                    <i class="fa fa-refresh"></i>
                </a>
            }
        </div>
    </div>
    <div class="card-body">
        @using (Ajax.BeginForm("editconfiguration", "wsetting", new AjaxOptions { HttpMethod = "POST", OnSuccess = "onSuccess", OnFailure = "OnFailure", InsertionMode = InsertionMode.InsertAfter, AllowCache = false }, new { @class = "form" }))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.Key)
            @Html.HiddenFor(m => m.Insert)
            <div class="row form-group">
                <div class="col-md-3 col-sm-4 col-xs-12 text-right">
                    Mã <span style="color:red; font-weight:bold;">*</span>
                </div>
                <div class="col-md-9 col-sm-8 col-xs-12">
                    @Html.TextBoxFor(m => m.Key, new { @class = "form-control", @maxlength = 70, @required = true, @readonly = true, @focus = true })
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-3 col-sm-4 col-xs-12 text-right">
                    Mô tả  <span style="color:red; font-weight:bold;">*</span>
                </div>
                <div class="col-md-9 col-sm-8 col-xs-12">
                    @Html.TextBoxFor(m => m.Description, new { @class = "form-control", @maxlength = 500, @tabindex = "1", @required = true })
                    @Html.ValidationMessageFor(m => m.Description)
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-3 col-sm-4 col-xs-12 text-right">
                    Giá trị <span style="color:red; font-weight:bold;">*</span>
                </div>
                <div class="col-md-9 col-sm-8 col-xs-12">
                    <div class="row form-group">
                        <div class="col-md-12 col-xs-12">
                            <a href="javascript:;" id="selectImg" tabindex="2">Chọn ảnh</a>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-12 col-xs-12">
                            @Html.TextBoxFor(m => m.Value, new { @class = "form-control", @maxlength = 255, @required = true, @tabindex = "3" })
                            <div style="width:400px; height:auto; padding:10px;">
                                @{
                                    string _imgUrl = null;
                                    if (Model.Value.Contains(".jpg") || Model.Value.Contains(".png") || Model.Value.Contains(".gif"))
                                    {
                                        _imgUrl = Model.Value;
                                    }
                                }
                                <img id="imgValue" src="@_imgUrl" width="100%" height="200" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-3 col-sm-4 col-xs-12">
                </div>
                <div class="col-md-9 col-sm-8 col-xs-12">
                    @{
                        if (ViewBag.Add == true || ViewBag.Edit == true)
                        {
                            <a href="/website/wsetting/configuration" class="btn btn-default" tabindex="4">Quay lại</a>
                            <button type="submit" class="btn btn-primary" id="submitForm" tabindex="5">Lưu</button>
                        }
                    }
                </div>
            </div>
        }
    </div>
</div>
@section script {
    <script src="/Areas/Administrator/Content/ckeditor/ckeditor.js"></script>
    <script src="/Areas/Administrator/Content/ckfinder/ckfinder.js"></script>
    <script src="/Scripts/jquery.validate.min.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="/Areas/Website/Content/Setting/configuration.action.js"></script>
}
